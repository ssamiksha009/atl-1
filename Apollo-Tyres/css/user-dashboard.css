/* ==================================================
   Apollo Tyres • Engineer Dashboard (Sidebar Layout)
   Subtle palette, aligned grids, no duplicate nav
   ================================================== */

/* THEME */
:root{
  --purple:#5b2a9d;
  --purple-600:#4c2a86;
  --purple-300:#8b71c0;
  --orange:#f46b45;
  --grad: linear-gradient(135deg, var(--purple-600), var(--orange));

  --bg:#f7f8fb;
  --panel:#ffffff;
  --ink:#121420;
  --muted:#6f748a;
  --line:#e7e8ef;
  --shadow:0 6px 16px rgba(17,19,28,.06);

  --r-lg:14px; --r-md:12px;
  --font: Inter, "Segoe UI", Roboto, system-ui, -apple-system, Helvetica, Arial, sans-serif;
}

/* BASE */
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:var(--font);color:var(--ink);background:var(--bg)}
a{text-decoration:none;color:inherit}

/* LAYOUT */
.sb{
  position:fixed; inset:0 auto 0 0; width:260px;
  background: linear-gradient(180deg, rgba(91,42,157,.95), rgba(244,107,69,.85));
  color:#fff; display:flex; flex-direction:column; box-shadow:var(--shadow);
}
.page{margin-left:260px; min-height:100vh; display:flex; flex-direction:column}
@media (max-width:980px){ .sb{position:static;width:100%} .page{margin-left:0} }

/* SIDEBAR */
.sb-brand{display:flex; align-items:center; gap:12px; padding:18px 18px 12px}
.logo{
  width:64px; height:64px;
  border-radius:12px; background:#fff; padding:8px; object-fit:contain;
  box-shadow:0 8px 18px rgba(0,0,0,.15);
}
.brand-text{font-weight:900; letter-spacing:.2px; font-size:18px}
.sb-nav{padding:10px}
.nav-item{
  display:flex; align-items:center; gap:12px; padding:11px 12px; border-radius:12px;
  color:#fbfaff; opacity:.95; font-weight:600;
}
.nav-item:hover{background:rgba(255,255,255,.12)}
.nav-item.active{background:rgba(255,255,255,.16)}
/* Sidebar icon sizing */
.sb-nav .nav-item .ico{ width:20px; height:20px; display:grid; place-items:center; flex:0 0 20px; color:currentColor; opacity:.95 }
.sb-nav .nav-item .ico svg{ width:20px; height:20px; display:block }
.sb-nav .nav-item:hover, .sb-nav .nav-item.active{ color:#fff }

.sb-footer{margin-top:auto; padding:14px}

/* TOPBAR */
.topbar{
  height:68px; background:#fff; border-bottom:1px solid var(--line);
  display:flex; align-items:center; justify-content:space-between; padding:0 22px;
  overflow:visible; /* avoid clipping the dropdown */
}
.topbar h1{margin:0; font-size:19px; font-weight:800; color:#1b2034}
.topbar-right{display:flex; align-items:center; gap:14px}
.search input{
  width:320px; max-width:44vw; padding:10px 14px; border:1px solid var(--line);
  border-radius:999px; outline:none; background:#fafbff;
}
.user{ position:relative; display:flex; align-items:center; gap:10px } /* position context for dropdown */
.user .avatar{width:40px;height:40px;border-radius:50%}
.user-info{display:flex; flex-direction:column; align-items:flex-end}
.user-info strong{font-size:14px}
.user-info small{color:var(--muted); font-size:12px}

/* CONTENT */
.content{padding:22px; display:grid; gap:22px}

/* CARDS */
.card{
  background:var(--panel); border:1px solid var(--line);
  border-radius:var(--r-lg); box-shadow:var(--shadow);
}
.card-head{
  padding:12px 16px; border-bottom:1px solid var(--line);
  display:flex; align-items:center; justify-content:space-between; gap:12px;
}
.card-head h2{margin:0; font-size:16px; color:#20233a; letter-spacing:.2px}

/* Welcome banner (subtle) */
.subtle-gradient{
  background: linear-gradient(135deg, rgba(91,42,157,.14), rgba(244,107,69,.12));
  border-color: var(--line);
}
.welcome{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px}
.welcome h2{margin:0 0 4px 0}
.welcome p{margin:0; color:#3b3f57}

/* KPI TILES (3-up with icon chips) */
.kpis{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px }
@media (max-width:980px){ .kpis{ grid-template-columns:repeat(2,1fr) } }
@media (max-width:560px){ .kpis{ grid-template-columns:1fr } }

.kpi{
  background:#fff; border:1px solid var(--line); border-radius:12px;
  box-shadow:var(--shadow);
  padding:14px; display:flex; align-items:center; gap:12px;
}
.kpi-ico{
  width:36px; height:36px; min-width:36px; display:grid; place-items:center;
  border-radius:50%;
  background: color-mix(in oklab, var(--purple-600), white 88%);
  color: var(--purple-600);
}
.kpi-ico svg{ width:20px; height:20px; display:block }
.kpi-meta{ display:grid; gap:4px }
.kpi-num{ font-size:26px; font-weight:800; color:var(--purple-600) }
.kpi-label{ font-size:13px; color:var(--muted) }

/* GRID */
.grid-2{ display:grid; grid-template-columns:2fr 1fr; gap:22px }
@media (max-width:1200px){ .grid-2{ grid-template-columns:1fr } }

/* ===================== TABLE ===================== */
.table-wrap{ padding:10px 12px 16px }

/* Use a single shared border model */
.table{
  width:100%;
  border-collapse: collapse; /* IMPORTANT for perfect alignment */
}

/* Head */
.table thead th{
  text-align:left; font-size:12.5px; font-weight:800; color:#fff;
  background: color-mix(in oklab, var(--purple-600), white 10%);
  padding:12px 10px;
  position:sticky; top:0; z-index:1;
  border-bottom:1px solid var(--line);
}

/* Body cells share one divider via the row border */
.table tbody tr{
  height:44px;                 /* uniform row height */
  border-bottom:1px solid var(--line);
}
.table tbody tr:last-child{ border-bottom:0; }

.table tbody td{
  padding:12px 10px;
  vertical-align:middle;
  border-bottom:0;             /* row draws the divider, not each cell */
}
.table tbody tr:hover{ background:#faf9ff }
.tright{ text-align:right }

/* STATUS BADGES */
.badge{
  display:inline-block; padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700;
  border:1px solid var(--line); background:#fff;
}
.badge.in-progress{ background:#fff7e6; color:#8a5a00; border-color:#ffe1a6 }
.badge.completed  { background:#e8f7ef; color:#126233; border-color:#c7ecd7 }
.badge.failed     { background:#fde7ea; color:#8d1f2b; border-color:#fac2cb }

/* LIST & TIMELINE */
.list{ list-style:none; margin:0; padding:8px 12px 16px; display:grid; gap:10px }
.list li{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px; border:1px solid var(--line); border-radius:12px; background:#fff }
.list .meta{ display:grid; gap:2px }
.list .meta small{ color:var(--muted) }

.timeline{ list-style:none; margin:0; padding:8px 12px 16px; display:grid; gap:10px }
.timeline li{
  border-left:3px solid color-mix(in oklab, var(--purple-600), white 25%);
  padding:8px 12px; background:#fff; border:1px solid var(--line); border-radius:12px;
}
.timeline time{ display:block; font-size:12px; color:var(--muted) }

/* QUICK ACTIONS */
.qa{ display:grid; gap:10px; padding:14px }

/* BUTTONS */
.btn{
  appearance:none; border:1px solid var(--line); background:#fff; color:var(--purple-600);
  padding:10px 14px; border-radius:999px; font-weight:700; cursor:pointer;
  transition:.16s ease; box-shadow:0 2px 6px rgba(0,0,0,.04);
}
.btn:hover{ transform:translateY(-1px); background:#f7f6ff }
.btn:active{ transform:translateY(0) }
.btn.primary{
  background: linear-gradient(135deg,
              color-mix(in oklab, var(--purple-600), white 20%),
              color-mix(in oklab, var(--orange), white 20%));
  color:#fff; border-color:transparent; box-shadow:0 6px 14px rgba(91,42,157,.18);
}
.btn.ghost{ background:transparent; border:1px solid rgba(255,255,255,.45); color:#fff }
.btn.wide{ width:100% }

/* EMPTY STATE */
.empty{
  margin:10px; padding:16px; text-align:center; color:var(--muted);
  border:1px dashed var(--line); border-radius:12px; background:#fff;
}

/* ACCESSIBILITY */
:focus-visible{ outline:3px solid rgba(91,42,157,.28); outline-offset:2px }

/* Helpers */
.muted{ color:var(--muted) }

/* Icon button (kebab) */
.icon-btn{
  appearance:none; border:1px solid var(--line); background:#fff; color:var(--purple-600);
  width:36px; height:36px; border-radius:999px; display:grid; place-items:center;
  cursor:pointer; transition:.15s ease;
}
.icon-btn svg{ width:18px; height:18px; display:block }
.icon-btn:hover{ background:#f5f4ff; transform:translateY(-1px) }

/* Profile dropdown (aligned) */
.profile-menu{
  position:absolute; right:0; top:calc(100% + 8px);
  width:320px; background:#fff; border:1px solid var(--line);
  border-radius:12px; box-shadow:var(--shadow); padding:10px;
  display:none; z-index:1000;
}
.profile-menu[aria-hidden="false"]{ display:block; }

.menu-header{
  display:flex; align-items:center; gap:10px;
  padding:6px 4px 10px; border-bottom:1px solid var(--line);
}
.menu-avatar{ width:40px; height:40px; border-radius:50%; object-fit:cover; border:1px solid var(--line) }
.menu-name{ font-weight:800; line-height:1.2 }
.menu-email{ font-size:12.5px; color:var(--muted) }

.menu-details{
  display:grid; gap:8px; padding:10px 2px;
  border-bottom:1px solid var(--line); margin-bottom:8px;
}
.menu-details .row{
  display:grid; grid-template-columns:120px 1fr; gap:8px; align-items:center;
}
.menu-details dt{ color:var(--muted); font-size:12.5px }
.menu-details dd{ margin:0; font-size:13.5px; color:var(--ink) }

.menu-actions{ display:grid; gap:6px; padding:2px }
.profile-menu button{
  width:100%; text-align:left; padding:10px; border-radius:10px; border:0;
  background:transparent; color:var(--ink); cursor:pointer;
}
.profile-menu button:hover{ background:#f7f7ff }
.profile-menu .danger{ color:#8d1f2b }
.profile-menu .danger:hover{ background:#fde7ea }

/* --- Inline rename affordance --- */
.project-title {
  display: flex;
  align-items: center;
  gap: 6px;
  position: relative;
}
.title-text { font-weight: 700; color: #2b2f45; }
.title-edit {
  width: 22px; height: 22px;
  border: 1px solid var(--line);
  border-radius: 6px; background: #fff;
  display: grid; place-items: center;
  cursor: pointer; opacity: 0; transition: .15s ease;
}
tbody tr:hover .title-edit { opacity: 1; }
.title-edit svg { width: 14px; height: 14px; color: var(--muted); }
.title-edit:hover { background: #f5f6ff; }
.title-input {
  font: inherit; padding: 4px 6px;
  border: 1px solid var(--line); border-radius: 6px; min-width: 220px;
}

/* Ensure title column uses the same vertical padding as others */
.table tbody td.project-title{
  padding:12px 10px;
}

/* Searchbar with left icon + refresh button */
.searchbar{
  display:flex; align-items:center; gap:10px;
  position:relative;
}

.searchbar .search-ico{
  position:absolute; left:12px; top:50%; transform:translateY(-50%);
  width:18px; height:18px; color:var(--muted); pointer-events:none; opacity:.7;
}
.searchbar .search-ico svg{ width:18px; height:18px; display:block }

.searchbar input[type="search"]{
  width:320px; max-width:44vw;
  padding:10px 14px 10px 38px;              /* left padding for icon */
  border:1px solid var(--line);
  border-radius:999px; outline:none; background:#fafbff;
}

.refresh-btn{
  width:38px; height:38px; border-radius:999px;
  display:grid; place-items:center;
}
.refresh-btn svg{ width:18px; height:18px; display:block }

/* Spin animation while refreshing */
@keyframes spin{ to{ transform:rotate(360deg) } }
.refresh-btn.is-refreshing svg{ animation:spin .7s linear infinite }

/* --- Searchbar stays the same (from earlier step) --- */
.searchbar{ display:flex; align-items:center; gap:10px; position:relative; }
.searchbar .search-ico{
  position:absolute; left:12px; top:50%; transform:translateY(-50%);
  width:18px; height:18px; color:var(--muted); opacity:.7; pointer-events:none;
}
.searchbar .search-ico svg{ width:18px; height:18px; display:block; }
.searchbar input[type="search"]{
  width:320px; max-width:44vw; padding:10px 14px 10px 38px;
  border:1px solid var(--line); border-radius:999px; background:#fafbff; outline:none;
}

/* --- Themed glossy refresh pill --- */
.refresh-pill{
  --g1: color-mix(in oklab, var(--purple-600), white 6%);
  --g2: color-mix(in oklab, var(--orange), white 10%);
  display:inline-flex; align-items:center; gap:10px;
  height:40px; padding:0 14px 0 8px;
  border-radius:999px; border:1px solid rgba(0,0,0,.08);
  background: linear-gradient(135deg, var(--g1), var(--g2));
  color:#fff; font-weight:700; letter-spacing:.2px;
  box-shadow:
    inset 0 2px 6px rgba(255,255,255,.25),
    0 6px 14px rgba(91,42,157,.18);
  cursor:pointer; transition:filter .15s ease, transform .06s ease;
}
.refresh-pill .label{ font-size:14px; white-space:nowrap; }

/* circular “pod” on the left */
.refresh-pill .disc{
  width:32px; height:32px; border-radius:50%;
  display:grid; place-items:center;
  background:
    radial-gradient(circle at 35% 35%, rgba(255,255,255,.38) 0 35%, transparent 36%),
    radial-gradient(circle at 50% 50%,
      color-mix(in oklab, var(--purple-300), white 25%) 0%,
      color-mix(in oklab, var(--purple-600), black 8%) 70%);
  border:2px solid rgba(255,255,255,.85);
  box-shadow: inset 0 2px 6px rgba(0,0,0,.18), 0 1px 3px rgba(0,0,0,.1);
}
.refresh-pill .disc .rotor{ width:18px; height:18px; fill:#fff; }

/* hover/active states */
.refresh-pill:hover{ filter:brightness(1.05); }
.refresh-pill:active{ transform:translateY(1px); }

/* busy animation */
@keyframes spin { to { transform: rotate(360deg); } }
.refresh-pill.is-refreshing .rotor{ animation: spin .9s linear infinite; opacity:.95; }

/* disabled look while refreshing */
.refresh-pill.is-refreshing{ cursor:default; filter:grayscale(.05) brightness(.98); }

/* --- Push-pin (favorite) --- */
.project-title {
  display: flex;
  align-items: center;
  gap: 8px;
  position: relative;
}

/* Hidden until row hover OR when pinned */
.pin-btn{
  appearance:none;
  border:0;
  background:transparent;
  width:22px; height:22px;
  padding:0; margin:0 4px 0 0;
  display:inline-grid; place-items:center;
  cursor:pointer;
  opacity:0; visibility:hidden;
  transition:opacity .15s ease, transform .15s ease;
  position:relative;

  /* was: top: 0.3cm;  (pushed it down) */
  top: 3px;         /* or try top: -2px; to move it slightly higher */
}
tbody tr:hover .pin-btn{ opacity:1; visibility:visible; }
.pin-btn.is-pinned{ opacity:1; visibility:visible; } /* stay visible when pinned */

.pin-btn svg{ width:18px; height:18px; display:block }

/* Red push-pin look */
.pin-btn .pin-ball{ fill:#e03232; }
.pin-btn .pin-highlight{ fill:#fff; opacity:.6; }
.pin-btn .pin-neck{ fill:#c61f1f; }
.pin-btn .pin-needle{ stroke:#6b7280; stroke-width:1.3; }

.pin-btn:hover{ transform: translateY(-1px) scale(1.03); }

.hl { font-weight: 800; color: var(--purple-600); }

/* --- Waving hand next to Welcome --- */
.welcome .welcome-title .hl { font-weight: 800; color: var(--purple-600); }

.waving-hand {
  width: 22px;
  height: 22px;
  margin-left: 8px;
  vertical-align: -3px;          /* aligns baseline with text */
  color: var(--purple-600);       /* uses theme color */
  transform-origin: 70% 70%;
  animation: wave 1.8s ease-in-out 1;
}

@keyframes wave {
  0%   { transform: rotate(0deg); }
  20%  { transform: rotate(14deg); }
  40%  { transform: rotate(-8deg); }
  60%  { transform: rotate(10deg); }
  80%  { transform: rotate(-4deg); }
  100% { transform: rotate(0deg); }
}

@media (prefers-reduced-motion: reduce) {
  .waving-hand { animation: none; }
}
